import { supabase } from './supabase.js';

// 完整的诗词数据
const poemsData = [
  {
    title: '江南',
    author: '汉乐府',
    dynasty: '汉',
    content: '江南可采莲，莲叶何田田。鱼戏莲叶间。鱼戏莲叶东，鱼戏莲叶西，鱼戏莲叶南，鱼戏莲叶北。',
    tags: ['写景', '山水', '夏天', '荷花']
  },
  {
    title: '长歌行',
    author: '汉乐府',
    dynasty: '汉',
    content: '青青园中葵，朝露待日晞。阳春布德泽，万物生光辉。常恐秋节至，焜黄华叶衰。',
    tags: ['抒情', '哲理', '惜时', '励志']
  },
  {
    title: '敕勒歌',
    author: '北朝民歌',
    dynasty: '北朝',
    content: '敕勒川，阴山下。天似穹庐，笼盖四野。天苍苍，野茫茫，风吹草低见牛羊。',
    tags: ['写景', '山水', '田园', '地名']
  },
  {
    title: '咏鹅',
    author: '骆宾王',
    dynasty: '唐',
    content: '鹅，鹅，鹅，曲项向天歌。白毛浮绿水，红掌拨清波。',
    tags: ['咏物', '写景', '动物']
  },
  {
    title: '风',
    author: '李峤',
    dynasty: '唐',
    content: '解落三秋叶，能开二月花。过江千尺浪，入竹万竿斜。',
    tags: ['咏物', '自然', '哲理']
  },
  {
    title: '咏柳',
    author: '贺知章',
    dynasty: '唐',
    content: '碧玉妆成一树高，万条垂下绿丝绦。不知细叶谁裁出，二月春风似剪刀。',
    tags: ['咏物', '春天', '写景']
  },
  {
    title: '回乡偶书',
    author: '贺知章',
    dynasty: '唐',
    content: '少小离家老大回，乡音无改鬓毛衰。儿童相见不相识，笑问客从何处来。',
    tags: ['思乡', '抒情', '写人']
  },
  {
    title: '凉州词',
    author: '王之涣',
    dynasty: '唐',
    content: '黄河远上白云间，一片孤城万仞山。羌笛何须怨杨柳，春风不度玉门关。',
    tags: ['边塞', '抒情', '地名', '黄河']
  },
  {
    title: '登鹳雀楼',
    author: '王之涣',
    dynasty: '唐',
    content: '白日依山尽，黄河入海流。欲穷千里目，更上一层楼。',
    tags: ['哲理', '励志', '写景']
  },
  {
    title: '春晓',
    author: '孟浩然',
    dynasty: '唐',
    content: '春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少。',
    tags: ['春天', '写景', '抒情']
  },
  {
    title: '凉州词',
    author: '王翰',
    dynasty: '唐',
    content: '葡萄美酒夜光杯，欲饮琵琶马上催。醉卧沙场君莫笑，古来征战几人回？',
    tags: ['边塞', '战争', '豪放']
  },
  {
    title: '出塞',
    author: '王昌龄',
    dynasty: '唐',
    content: '秦时明月汉时关，万里长征人未还。但使龙城飞将在，不教胡马度阴山。',
    tags: ['边塞', '战争', '爱国']
  },
  {
    title: '芙蓉楼送辛渐',
    author: '王昌龄',
    dynasty: '唐',
    content: '寒雨连江夜入吴，平明送客楚山孤。洛阳亲友如相问，一片冰心在玉壶。',
    tags: ['送别', '友情', '抒情']
  },
  {
    title: '鹿柴',
    author: '王维',
    dynasty: '唐',
    content: '空山不见人，但闻人语响。返景入深林，复照青苔上。',
    tags: ['写景', '山水', '哲理']
  },
  {
    title: '送元二使安西',
    author: '王维',
    dynasty: '唐',
    content: '渭城朝雨浥轻尘，客舍青青柳色新。劝君更尽一杯酒，西出阳关无故人。',
    tags: ['送别', '友情', '离别']
  },
  {
    title: '九月九日忆山东兄弟',
    author: '王维',
    dynasty: '唐',
    content: '独在异乡为异客，每逢佳节倍思亲。遥知兄弟登高处，遍插茱萸少一人。',
    tags: ['思乡', '节日', '重阳']
  },
  {
    title: '静夜思',
    author: '李白',
    dynasty: '唐',
    content: '床前明月光，疑是地上霜。举头望明月，低头思故乡。',
    tags: ['思乡', '月亮', '抒情']
  },
  {
    title: '古朗月行',
    author: '李白',
    dynasty: '唐',
    content: '小时不识月，呼作白玉盘。又疑瑶台镜，飞在青云端。仙人垂两足，桂树何团团。白兔捣药成，问言与谁餐。',
    tags: ['月亮', '神话', '抒情']
  },
  {
    title: '望庐山瀑布',
    author: '李白',
    dynasty: '唐',
    content: '日照香炉生紫烟，遥看瀑布挂前川。飞流直下三千尺，疑是银河落九天。',
    tags: ['写景', '山水', '豪放']
  },
  {
    title: '赠汪伦',
    author: '李白',
    dynasty: '唐',
    content: '李白乘舟将欲行，忽闻岸上踏歌声。桃花潭水深千尺，不及汪伦送我情。',
    tags: ['友情', '送别', '抒情']
  },
  {
    title: '黄鹤楼送孟浩然之广陵',
    author: '李白',
    dynasty: '唐',
    content: '故人西辞黄鹤楼，烟花三月下扬州。孤帆远影碧空尽，唯见长江天际流。',
    tags: ['送别', '友情', '写景']
  },
  {
    title: '早发白帝城',
    author: '李白',
    dynasty: '唐',
    content: '朝辞白帝彩云间，千里江陵一日还。两岸猿声啼不住，轻舟已过万重山。',
    tags: ['写景', '山水', '抒情']
  },
  {
    title: '望天门山',
    author: '李白',
    dynasty: '唐',
    content: '天门中断楚江开，碧水东流至此回。两岸青山相对出，孤帆一片日边来。',
    tags: ['写景', '山水', '豪放']
  },
  {
    title: '别董大',
    author: '高适',
    dynasty: '唐',
    content: '千里黄云白日曛，北风吹雁雪纷纷。莫愁前路无知己，天下谁人不识君？',
    tags: ['送别', '友情', '励志']
  },
  {
    title: '绝句',
    author: '杜甫',
    dynasty: '唐',
    content: '两个黄鹂鸣翠柳，一行白鹭上青天。窗含西岭千秋雪，门泊东吴万里船。',
    tags: ['写景', '春天', '山水']
  },
  {
    title: '春夜喜雨',
    author: '杜甫',
    dynasty: '唐',
    content: '好雨知时节，当春乃发生。随风潜入夜，润物细无声。野径云俱黑，江船火独明。晓看红湿处，花重锦官城。',
    tags: ['春天', '写景', '抒情']
  },
  {
    title: '绝句',
    author: '杜甫',
    dynasty: '唐',
    content: '迟日江山丽，春风花草香。泥融飞燕子，沙暖睡鸳鸯。',
    tags: ['春天', '写景', '田园']
  },
  {
    title: '江畔独步寻花',
    author: '杜甫',
    dynasty: '唐',
    content: '黄师塔前江水东，春光懒困倚微风。桃花一簇开无主，可爱深红爱浅红？',
    tags: ['春天', '写景', '抒情']
  },
  {
    title: '枫桥夜泊',
    author: '张继',
    dynasty: '唐',
    content: '月落乌啼霜满天，江枫渔火对愁眠。姑苏城外寒山寺，夜半钟声到客船。',
    tags: ['秋天', '写景', '抒情', '地名']
  },
  {
    title: '滁州西涧',
    author: '韦应物',
    dynasty: '唐',
    content: '独怜幽草涧边生，上有黄鹂深树鸣。春潮带雨晚来急，野渡无人舟自横。',
    tags: ['写景', '山水', '春天']
  },
  {
    title: '游子吟',
    author: '孟郊',
    dynasty: '唐',
    content: '慈母手中线，游子身上衣。临行密密缝，意恐迟迟归。谁言寸草心，报得三春晖。',
    tags: ['抒情', '母爱', '感恩']
  },
  {
    title: '早春呈水部张十八员外',
    author: '韩愈',
    dynasty: '唐',
    content: '天街小雨润如酥，草色遥看近却无。最是一年春好处，绝胜烟柳满皇都。',
    tags: ['春天', '写景', '抒情']
  },
  {
    title: '渔歌子',
    author: '张志和',
    dynasty: '唐',
    content: '西塞山前白鹭飞，桃花流水鳜鱼肥。青箬笠，绿蓑衣，斜风细雨不须归。',
    tags: ['山水', '田园', '春天']
  },
  {
    title: '塞下曲',
    author: '卢纶',
    dynasty: '唐',
    content: '月黑雁飞高，单于夜遁逃。欲将轻骑逐，大雪满弓刀。',
    tags: ['边塞', '战争', '冬天', '雪']
  },
  {
    title: '望洞庭',
    author: '刘禹锡',
    dynasty: '唐',
    content: '湖光秋月两相和，潭面无风镜未磨。遥望洞庭山水色，白银盘里一青螺。',
    tags: ['写景', '山水', '秋天', '月亮']
  },
  {
    title: '浪淘沙',
    author: '刘禹锡',
    dynasty: '唐',
    content: '九曲黄河万里沙，浪淘风簸自天涯。如今直上银河去，同到牵牛织女家。',
    tags: ['抒情', '黄河', '神话']
  },
  {
    title: '赋得古原草送别',
    author: '白居易',
    dynasty: '唐',
    content: '离离原上草，一岁一枯荣。野火烧不尽，春风吹又生。远芳侵古道，晴翠接荒城。又送王孙去，萋萋满别情。',
    tags: ['送别', '春天', '哲理']
  },
  {
    title: '池上',
    author: '白居易',
    dynasty: '唐',
    content: '小娃撑小艇，偷采白莲回。不解藏踪迹，浮萍一道开。',
    tags: ['写景', '夏天', '荷花', '儿童']
  },
  {
    title: '忆江南',
    author: '白居易',
    dynasty: '唐',
    content: '江南好，风景旧曾谙。日出江花红胜火，春来江水绿如蓝，能不忆江南？',
    tags: ['抒情', '写景', '春天', '地名']
  },
  {
    title: '小儿垂钓',
    author: '胡令能',
    dynasty: '唐',
    content: '蓬头稚子学垂纶，侧坐莓苔草映身。路人借问遥招手，怕得鱼惊不应人。',
    tags: ['写人', '儿童', '田园']
  },
  {
    title: '悯农',
    author: '李绅',
    dynasty: '唐',
    content: '锄禾日当午，汗滴禾下土。谁知盘中餐，粒粒皆辛苦。',
    tags: ['哲理', '励志', '田园']
  },
  {
    title: '悯农',
    author: '李绅',
    dynasty: '唐',
    content: '春种一粒粟，秋收万颗子。四海无闲田，农夫犹饿死。',
    tags: ['哲理', '社会', '田园']
  },
  {
    title: '江雪',
    author: '柳宗元',
    dynasty: '唐',
    content: '千山鸟飞绝，万径人踪灭。孤舟蓑笠翁，独钓寒江雪。',
    tags: ['冬天', '雪', '山水', '哲理']
  },
  {
    title: '寻隐者不遇',
    author: '贾岛',
    dynasty: '唐',
    content: '松下问童子，言师采药去。只在此山中，云深不知处。',
    tags: ['山水', '哲理', '写人']
  },
  {
    title: '山行',
    author: '杜牧',
    dynasty: '唐',
    content: '远上寒山石径斜，白云深处有人家。停车坐爱枫林晚，霜叶红于二月花。',
    tags: ['秋天', '写景', '山水']
  },
  {
    title: '清明',
    author: '杜牧',
    dynasty: '唐',
    content: '清明时节雨纷纷，路上行人欲断魂。借问酒家何处有，牧童遥指杏花村。',
    tags: ['节日', '清明节', '抒情']
  },
  {
    title: '江南春',
    author: '杜牧',
    dynasty: '唐',
    content: '千里莺啼绿映红，水村山郭酒旗风。南朝四百八十寺，多少楼台烟雨中。',
    tags: ['春天', '写景', '怀古']
  },
  {
    title: '蜂',
    author: '罗隐',
    dynasty: '唐',
    content: '不论平地与山尖，无限风光尽被占。采得百花成蜜后，为谁辛苦为谁甜。',
    tags: ['咏物', '哲理', '社会']
  },
  {
    title: '江上渔者',
    author: '范仲淹',
    dynasty: '宋',
    content: '江上往来人，但爱鲈鱼美。君看一叶舟，出没风波里。',
    tags: ['哲理', '社会', '写景']
  },
  {
    title: '元日',
    author: '王安石',
    dynasty: '宋',
    content: '爆竹声中一岁除，春风送暖入屠苏。千门万户曈曈日，总把新桃换旧符。',
    tags: ['节日', '春节', '抒情']
  },
  {
    title: '泊船瓜洲',
    author: '王安石',
    dynasty: '宋',
    content: '京口瓜洲一水间，钟山只隔数重山。春风又绿江南岸，明月何时照我还。',
    tags: ['思乡', '春天', '抒情']
  },
  {
    title: '书湖阴先生壁',
    author: '王安石',
    dynasty: '宋',
    content: '茅檐长扫净无苔，花木成畦手自栽。一水护田将绿绕，两山排闼送青来。',
    tags: ['田园', '写景', '抒情']
  },
  {
    title: '六月二十七日望湖楼醉书',
    author: '苏轼',
    dynasty: '宋',
    content: '黑云翻墨未遮山，白雨跳珠乱入船。卷地风来忽吹散，望湖楼下水如天。',
    tags: ['夏天', '写景', '豪放']
  },
  {
    title: '饮湖上初晴后雨',
    author: '苏轼',
    dynasty: '宋',
    content: '水光潋滟晴方好，山色空蒙雨亦奇。欲把西湖比西子，淡妆浓抹总相宜。',
    tags: ['写景', '山水', '抒情']
  },
  {
    title: '惠崇春江晓景',
    author: '苏轼',
    dynasty: '宋',
    content: '竹外桃花三两枝，春江水暖鸭先知。蒌蒿满地芦芽短，正是河豚欲上时。',
    tags: ['春天', '写景', '哲理']
  },
  {
    title: '题西林壁',
    author: '苏轼',
    dynasty: '宋',
    content: '横看成岭侧成峰，远近高低各不同。不识庐山真面目，只缘身在此山中。',
    tags: ['哲理', '山水', '抒情']
  },
  {
    title: '夏日绝句',
    author: '李清照',
    dynasty: '宋',
    content: '生当作人杰，死亦为鬼雄。至今思项羽，不肯过江东。',
    tags: ['爱国', '豪放', '怀古']
  },
  {
    title: '三衢道中',
    author: '曾几',
    dynasty: '宋',
    content: '梅子黄时日日晴，小溪泛尽却山行。绿阴不减来时路，添得黄鹂四五声。',
    tags: ['夏天', '写景', '山水']
  },
  {
    title: '示儿',
    author: '陆游',
    dynasty: '宋',
    content: '死去元知万事空，但悲不见九州同。王师北定中原日，家祭无忘告乃翁。',
    tags: ['爱国', '抒情', '哲理']
  },
  {
    title: '秋夜将晓出篱门迎凉有感',
    author: '陆游',
    dynasty: '宋',
    content: '三万里河东入海，五千仞岳上摩天。遗民泪尽胡尘里，南望王师又一年。',
    tags: ['爱国', '抒情', '秋天']
  },
  {
    title: '四时田园杂兴',
    author: '范成大',
    dynasty: '宋',
    content: '昼出耘田夜绩麻，村庄儿女各当家。童孙未解供耕织，也傍桑阴学种瓜。',
    tags: ['田园', '夏天', '儿童']
  },
  {
    title: '四时田园杂兴',
    author: '范成大',
    dynasty: '宋',
    content: '梅子金黄杏子肥，麦花雪白菜花稀。日长篱落无人过，唯有蜻蜓蛱蝶飞。',
    tags: ['田园', '夏天', '写景']
  },
  {
    title: '小池',
    author: '杨万里',
    dynasty: '宋',
    content: '泉眼无声惜细流，树阴照水爱晴柔。小荷才露尖尖角，早有蜻蜓立上头。',
    tags: ['夏天', '写景', '荷花']
  },
  {
    title: '晓出净慈寺送林子方',
    author: '杨万里',
    dynasty: '宋',
    content: '毕竟西湖六月中，风光不与四时同。接天莲叶无穷碧，映日荷花别样红。',
    tags: ['夏天', '写景', '荷花']
  },
  {
    title: '春日',
    author: '朱熹',
    dynasty: '宋',
    content: '胜日寻芳泗水滨，无边光景一时新。等闲识得东风面，万紫千红总是春。',
    tags: ['春天', '哲理', '抒情']
  },
  {
    title: '观书有感',
    author: '朱熹',
    dynasty: '宋',
    content: '半亩方塘一鉴开，天光云影共徘徊。问渠那得清如许？为有源头活水来。',
    tags: ['哲理', '励志', '抒情']
  },
  {
    title: '题临安邸',
    author: '林升',
    dynasty: '宋',
    content: '山外青山楼外楼，西湖歌舞几时休？暖风熏得游人醉，直把杭州作汴州。',
    tags: ['爱国', '抒情', '怀古']
  },
  {
    title: '和晋陵陆丞早春游望',
    author: '杜审言',
    dynasty: '唐',
    content: '独有宦游人，偏惊物候新。云霞出海曙，梅柳渡江春。淑气催黄鸟，晴光转绿苹。忽闻歌古调，归思欲沾巾。',
    tags: ['春天', '思乡', '抒情']
  },
  {
    title: '送杜少府之任蜀州',
    author: '王勃',
    dynasty: '唐',
    content: '城阙辅三秦，风烟望五津。与君离别意，同是宦游人。海内存知己，天涯若比邻。无为在歧路，儿女共沾巾。',
    tags: ['送别', '友情', '励志']
  },
  {
    title: '在狱咏蝉',
    author: '骆宾王',
    dynasty: '唐',
    content: '西陆蝉声唱，南冠客思侵。那堪玄鬓影，来对白头吟。露重飞难进，风多响易沉。无人信高洁，谁为表予心。',
    tags: ['抒情', '咏物', '哲理']
  },
  {
    title: '登幽州台歌',
    author: '陈子昂',
    dynasty: '唐',
    content: '前不见古人，后不见来者。念天地之悠悠，独怆然而涕下。',
    tags: ['抒情', '哲理', '怀古']
  },
  {
    title: '送魏大从军',
    author: '陈子昂',
    dynasty: '唐',
    content: '匈奴犹未灭，魏绛复从戎。帐别三河道，言追六郡雄。雁山横代北，狐塞接云中。勿使燕然上，惟留汉将功！',
    tags: ['边塞', '战争', '励志']
  },
  {
    title: '春江花月夜',
    author: '张若虚',
    dynasty: '唐',
    content: '春江潮水连海平，海上明月共潮生。滟滟随波千万里，何处春江无月明。江流宛转绕芳甸，月照花林皆似霰。空里流霜不觉飞，汀上白沙看不见。江天一色无纤尘，皎皎空中孤月轮。江畔何人初见月？江月何年初照人？人生代代无穷已，江月年年望相似。不知江月待何人，但见长江送流水。白云一片去悠悠，青枫浦上不胜愁。谁家今夜扁舟子？何处相思明月楼？可怜楼上月徘徊，应照离人妆镜台。玉户帘中卷不去，捣衣砧上拂还来。此时相望不相闻，愿逐月华流照君。鸿雁长飞光不度，鱼龙潜跃水成文。昨夜闲潭梦落花，可怜春半不还家。江水流春去欲尽，江潭落月复西斜。斜月沉沉藏海雾，碣石潇湘无限路。不知乘月几人归，落月摇情满江树。',
    tags: ['抒情', '月亮', '春天', '哲理']
  },
  {
    title: '山居秋暝',
    author: '王维',
    dynasty: '唐',
    content: '空山新雨后，天气晚来秋。明月松间照，清泉石上流。竹喧归浣女，莲动下渔舟。随意春芳歇，王孙自可留。',
    tags: ['秋天', '山水', '田园']
  },
  {
    title: '鸟鸣涧',
    author: '王维',
    dynasty: '唐',
    content: '人闲桂花落，夜静春山空。月出惊山鸟，时鸣春涧中。',
    tags: ['春天', '山水', '抒情']
  },
  {
    title: '过故人庄',
    author: '孟浩然',
    dynasty: '唐',
    content: '故人具鸡黍，邀我至田家。绿树村边合，青山郭外斜。开轩面场圃，把酒话桑麻。待到重阳日，还来就菊花。',
    tags: ['田园', '友情', '节日']
  },
  {
    title: '宿建德江',
    author: '孟浩然',
    dynasty: '唐',
    content: '移舟泊烟渚，日暮客愁新。野旷天低树，江清月近人。',
    tags: ['抒情', '山水', '月亮']
  },
  {
    title: '走马川行奉送封大夫出师西征',
    author: '岑参',
    dynasty: '唐',
    content: '君不见走马川行雪海边，平沙莽莽黄入天。轮台九月风夜吼，一川碎石大如斗，随风满地石乱走。匈奴草黄马正肥，金山西见烟尘飞，汉家大将西出师。将军金甲夜不脱，半夜军行戈相拨，风头如刀面如割。马毛带雪汗气蒸，五花连钱旋作冰，幕中草檄砚水凝。虏骑闻之应胆慑，料知短兵不敢接，车师西门伫献捷。',
    tags: ['边塞', '战争', '豪放', '冬天']
  }
];

async function migratePoemsData() {
  console.log('开始迁移诗词数据到Supabase...');
  
  try {
    // 检查诗词表是否存在数据
    const { data: existingData, error: checkError } = await supabase
      .from('poems')
      .select('id')
      .limit(1);
    
    if (checkError) {
      console.error('检查诗词表时出错:', checkError);
      return;
    }
    
    if (existingData && existingData.length > 0) {
      console.log('诗词表中已有数据，跳过插入');
      return;
    }
    
    // 批量插入诗词数据
    const { data, error } = await supabase
      .from('poems')
      .insert(poemsData)
      .select();
    
    if (error) {
      console.error('插入诗词数据时出错:', error);
    } else {
      console.log(`成功插入 ${data.length} 首诗词到数据库`);
      console.log('诗词数据迁移完成！');
    }
  } catch (error) {
    console.error('迁移过程中发生错误:', error);
  }
}

// 执行迁移
migratePoemsData();